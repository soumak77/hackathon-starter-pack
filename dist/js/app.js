!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},i={},r={},n={}.hasOwnProperty,a=/^\.\.?(\/|$)/,s=function(e,t){for(var i,r=[],n=(a.test(t)?e+"/"+t:t).split("/"),s=0,o=n.length;s<o;s++)i=n[s],".."===i?r.pop():"."!==i&&""!==i&&r.push(i);return r.join("/")},o=function(e){return e.split("/").slice(0,-1).join("/")},u=function(t){return function(i){var r=s(o(t),i);return e.require(r,t)}},l=function(e,t){var r=null;r=m&&m.createHot(e);var n={id:e,exports:{},hot:r};return i[e]=n,t(n.exports,u(e),n),n.exports},c=function(e){return r[e]?c(r[e]):e},d=function(e,t){return c(s(o(e),t))},h=function(e,r){null==r&&(r="/");var a=c(e);if(n.call(i,a))return i[a].exports;if(n.call(t,a))return l(a,t[a]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};h.alias=function(e,t){r[t]=e};var f=/\.[^.\/]+$/,g=/\/index(\.[^\/]+)?$/,p=function(e){if(f.test(e)){var t=e.replace(f,"");n.call(r,t)&&r[t].replace(f,"")!==t+"/index"||(r[t]=e)}if(g.test(e)){var i=e.replace(g,"");n.call(r,i)||(r[i]=e)}};h.register=h.define=function(e,r){if("object"==typeof e)for(var a in e)n.call(e,a)&&h.register(a,e[a]);else t[e]=r,delete i[e],p(e)},h.list=function(){var e=[];for(var i in t)n.call(t,i)&&e.push(i);return e};var m=e._hmr&&new e._hmr(d,h,t,i);h._cache=i,h.hmr=m&&m.wrap,h.brunch=!0,e.require=h}}(),function(){var e;window;require.register("app.js",function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var n=t("fastclick"),a=r(n),s=t("angular"),o=r(s);t("angular-base-apps"),t("angular-google-chart/ng-google-chart"),t("angular-ui-router");var u=t("firebase"),l=r(u);t("angularfire");var c=t("./config/config-firebase"),d=r(c);t("angular-icons/dist/open-iconic"),t("angular-icons/dist/ionicons"),t("angular-icons/dist/material-icons"),t("angular-dynamic-routing/dynamicRouting"),t("angular-dynamic-routing/dynamicRouting.animations");var h=t("./config/config-routes"),f=r(h),g=t("./modules"),p=r(g);l["default"].initializeApp(d["default"]);var m=function(e,t,i,r){e.otherwise("/"),t.html5Mode({enabled:!1,requireBase:!1}),i.registerUrl(d["default"].databaseURL),r.registerDynamicRoutes(f["default"])};m.$inject=["$urlRouterProvider","$locationProvider","$firebaseRefProvider","$BaseAppsStateProvider"];var v=function(){a["default"].FastClick.attach(document.body)};o["default"].module("application",["ui.router","ngAnimate","firebase","base","googlechart","angularIcons.openIconic","angularIcons.ionicons","angularIcons.materialIcons","dynamicRouting","dynamicRouting.animations"].concat(p["default"])).config(m).run(v)}),require.register("config/config-firebase.js",function(e,t,i){"use strict";i.exports={apiKey:"AIzaSyBkB1IvviOcPq4z8Rs7nijEdIa9n1IvRlU",authDomain:"angular-firebase-template.firebaseapp.com",databaseURL:"https://angular-firebase-template.firebaseio.com",storageBucket:""}}),require.register("config/config-routes.js",function(e,t,i){"use strict";i.exports=[{name:"reporting",url:"/reporting",controller:"ReportingController as reporting",path:"modules/reporting/reporting.html"},{name:"messaging",url:"/messaging",controller:"MessagingController as messaging",animationIn:"slideInRight",animationOut:"slideOutLeft",path:"modules/messaging/messaging.html"},{name:"account",url:"/account",controller:"AccountController as account",animationIn:"slideInLeft",animationOut:"slideOutRight",path:"modules/account/account.html"},{name:"home",url:"/",controller:"HomeController as home",animationIn:"slideInRight",animationOut:"slideOutLeft",path:"modules/home/home.html"}]}),require.register("modules/account/account-controller.js",function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=function(){function e(t,i,n){return r(this,e),this.authService=t,this.authLoading=!1,this.$log=i,this.BaseAppsApi=n,this}return n(e,[{key:"signin",value:function(e){var t=this,i=this.$log,r=this.BaseAppsApi;switch(e){case"anonymous":return this.authLoading=!0,this.authService.$signInAnonymously()["catch"](function(e){i.log("Login Failed!",e),r.publish("account-notifications",{title:"Anonymous Login Failed",content:e.message,color:"alert"})})["finally"](function(){return t.authLoading=!1});case"google":case"twitter":case"facebook":case"github":return this.authLoading=!0,this.authService.$signInWithPopup(e)["catch"](function(t){i.log("Login Failed!",t),r.publish("account-notifications",{title:e.substr(0,1).toUpperCase()+e.substr(1)+" Login Failed",content:t.message+(t.email?" (email: "+t.email+")":""),color:"alert"})})["finally"](function(){return t.authLoading=!1});default:return i.log("Provider not supported: "+e),null}}},{key:"printUserInfo",value:function(){return JSON.stringify(this.authService.$getAuth(),null,2)}},{key:"signout",value:function(){var e=this;return this.authLoading=!0,this.authService.$signOut()["finally"](function(){return e.authLoading=!1})}}]),e}();e["default"]=a,a.$inject=["$firebaseAuthService","$log","BaseAppsApi"]}),require.register("modules/account/index.js",function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),t("firebase");var n=t("./account-controller"),a=r(n);e["default"]=angular.module("application.account",["firebase.auth"]).controller("AccountController",a["default"]).name}),require.register("modules/home/home-controller.js",function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=function(){function e(t,i,n,a){r(this,e);var s=this,o=void 0;o=t["default"].child("person"),this.person=i(o),o=t["default"].child("messages"),this.messages=n(o),this.messages.$resolved=!1,this.messages.$loaded().then(function(){s.messages.$resolved=!0});var u=750;return this.showMessages=!1,a(function(){s.showMessages=!0},u),s}return n(e,[{key:"submitMessage",value:function(e){this.messages.$add(e)}},{key:"updateName",value:function(e){this.person.name=e,this.person.$save()}}]),e}();e["default"]=a,a.$inject=["$firebaseRef","$firebaseObject","$firebaseArray","$timeout"]}),require.register("modules/home/index.js",function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),t("firebase");var n=t("./home-controller"),a=r(n);e["default"]=angular.module("application.home",["firebase.database"]).controller("HomeController",a["default"]).name}),require.register("modules/index.js",function(e,t,i){"use strict";t("./account"),t("./home"),t("./messaging"),t("./reporting"),i.exports=["application.account","application.home","application.messaging","application.reporting"]}),require.register("modules/messaging/index.js",function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),t("firebase");var n=t("./messaging-controller"),a=r(n);e["default"]=angular.module("application.messaging",["firebase.database"]).controller("MessagingController",a["default"]).name}),require.register("modules/messaging/messaging-controller.js",function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=function(){function e(t,i,n,a){r(this,e);var s=this,o=void 0;o=t["default"].child("person"),this.person=i(o),o=t["default"].child("messages"),this.messages=n(o),this.messages.$resolved=!1,this.messages.$loaded().then(function(){s.messages.$resolved=!0});var u=750;return this.showMessages=!1,a(function(){s.showMessages=!0},u),s}return n(e,[{key:"submitMessage",value:function(e){this.messages.$add(e)}},{key:"updateName",value:function(e){this.person.name=e,this.person.$save()}}]),e}();e["default"]=a,a.$inject=["$firebaseRef","$firebaseObject","$firebaseArray","$timeout"]}),require.register("modules/reporting/index.js",function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var n=t("./reporting-controller"),a=r(n);e["default"]=angular.module("application.reporting",["firebase.database"]).controller("ReportingController",a["default"]).name}),require.register("modules/reporting/reporting-controller.js",function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=t("firebase-reporting"),o=r(s),u=t("firebase"),l=r(u),c=function(){function e(t,i,r,a,s){var u=this;return n(this,e),this.authService=i(l["default"].auth()),this.$timeout=a,this.$q=s,this.authLoaded=!1,this.totalClicks=null,this.totalUsers=null,this.lastClicked=null,this.data=r(t["default"].child("data")),this.reportingService=new o["default"]({firebase:t["default"].child("reporting")}),this.authService.$requireSignIn().then(function(){return u.init()})["catch"](function(){return u.authService.$signInAnonymously().then(function(){return u.init()})}),this.piechart={type:"PieChart",data:{cols:[{label:"Button",type:"string"},{label:"Times Clicked",type:"number"}],rows:[]},options:{legend:{position:"bottom"}}},this.linecharts={},this.linecharts.minute={type:"LineChart",data:{cols:[{label:"Time",type:"date"},{label:"A",type:"number"},{label:"B",type:"number"},{label:"C",type:"number"},{label:"D",type:"number"}],rows:[]},options:{title:"Clicked this Hour",legend:{position:"bottom"}}},this.linecharts.hour={type:"LineChart",data:{cols:[{label:"Time",type:"date"},{label:"A",type:"number"},{label:"B",type:"number"},{label:"C",type:"number"},{label:"D",type:"number"}],rows:[]},options:{title:"Clicked Today",legend:{position:"bottom"}}},this.linecharts.day={type:"LineChart",data:{cols:[{label:"Time",type:"date"},{label:"A",type:"number"},{label:"B",type:"number"},{label:"C",type:"number"},{label:"D",type:"number"}],rows:[]},options:{title:"Clicked this Month",legend:{position:"bottom"}}},this.linecharts.week={type:"LineChart",data:{cols:[{label:"Time",type:"date"},{label:"A",type:"number"},{label:"B",type:"number"},{label:"C",type:"number"},{label:"D",type:"number"}],rows:[]},options:{title:"Clicked this Year",legend:{position:"bottom"}}},this}return a(e,[{key:"init",value:function(){var e=this;this.authLoaded=!0,this.initReportingService(),this.data.$watch(function(){return e.drawAll()}),this.drawAll()}},{key:"buttonClicked",value:function(e){var t=this,i={uid:this.authService.$getAuth().uid,timestamp:l["default"].database.ServerValue.TIMESTAMP,anyclicked:1};i[e+"clicked"]=1,this.reportingService.saveMetrics(i).then(function(){t.data.$add(i)})}},{key:"drawAll",value:function(){this.drawMetrics(),this.drawCharts()}},{key:"drawMetrics",value:function(){var e=this;this.reportingService.filter().sum("anyclicked").select(1).then(function(t){e.$timeout(function(){return e.totalClicks=t[0]||0})}),this.reportingService.filter("users").sum("anyclicked").count().then(function(t){e.$timeout(function(){return e.totalUsers=t||0})}),this.reportingService.filter().last("timestamp").select(1).then(function(t){e.$timeout(function(){return e.lastClicked=t[0]?t[0]:null})})}},{key:"drawCharts",value:function(){this.drawPieChart(),this.drawLineChart("minute"),this.drawLineChart("hour"),this.drawLineChart("day"),this.drawLineChart("week")}},{key:"drawPieChart",value:function(){var e=this,t=this.reportingService.filter().sum("aclicked").value(),i=this.reportingService.filter().sum("bclicked").value(),r=this.reportingService.filter().sum("cclicked").value(),n=this.reportingService.filter().sum("dclicked").value();this.$q.all([t,i,r,n]).then(function(t){e.$timeout(function(){e.piechart.data.rows.splice(0,e.piechart.data.rows.length),e.piechart.data.rows.push({c:[{v:"A"},{v:t[0]}]}),e.piechart.data.rows.push({c:[{v:"B"},{v:t[1]}]}),e.piechart.data.rows.push({c:[{v:"C"},{v:t[2]}]}),e.piechart.data.rows.push({c:[{v:"D"},{v:t[3]}]})})})}},{key:"drawLineChart",value:function(e){var t=this,i=new Date,r=new Date;switch(i.setMilliseconds(0),i.setSeconds(0),i.setMinutes(0),e){case"minute":r.setTime(i.getTime()),r.setHours(i.getHours()+1);break;case"hour":i.setHours(0),r.setTime(i.getTime()),r.setDate(i.getDate()+1);break;case"day":i.setHours(0),i.setDate(1),r.setTime(i.getTime()),r.setMonth(i.getMonth()+1);break;case"week":i.setHours(0),i.setDate(1),i.setMonth(1),r.setTime(i.getTime()),r.setFullYear(i.getFullYear()+1)}var n=this.reportingService.filter().sum("aclicked").during(e).range(i.getTime(),r.getTime()).values(!0),a=this.reportingService.filter().sum("bclicked").during(e).range(i.getTime(),r.getTime()).values(!0),s=this.reportingService.filter().sum("cclicked").during(e).range(i.getTime(),r.getTime()).values(!0),o=this.reportingService.filter().sum("dclicked").during(e).range(i.getTime(),r.getTime()).values(!0);this.$q.all([n,a,s,o]).then(function(i){t.linecharts[e].data.rows.splice(0,t.linecharts[e].data.rows.length);for(var r=0;r<i[0].length;r++)t.linecharts[e].data.rows.push({c:[{v:new Date(i[0][r].timestamp)},{v:i[0][r].value},{v:i[1][r].value},{v:i[2][r].value},{v:i[3][r].value}]})})}},{key:"initReportingService",value:function(){this.reportingService.addFilter("users",["uid"]),this.reportingService.addMetric("timestamp",["first","last"]),this.reportingService.addMetric("anyclicked",["sum"]),this.reportingService.enableRetainer("minute","anyclicked",["sum"]),this.reportingService.enableRetainer("hour","anyclicked",["sum"]),this.reportingService.enableRetainer("day","anyclicked",["sum"]),this.reportingService.enableRetainer("week","anyclicked",["sum"]),this.reportingService.addMetric("aclicked",["sum"]),this.reportingService.enableRetainer("minute","aclicked",["sum"]),this.reportingService.enableRetainer("hour","aclicked",["sum"]),this.reportingService.enableRetainer("day","aclicked",["sum"]),this.reportingService.enableRetainer("week","aclicked",["sum"]),this.reportingService.addMetric("bclicked",["sum"]),this.reportingService.enableRetainer("minute","bclicked",["sum"]),this.reportingService.enableRetainer("hour","bclicked",["sum"]),this.reportingService.enableRetainer("day","bclicked",["sum"]),this.reportingService.enableRetainer("week","bclicked",["sum"]),this.reportingService.addMetric("cclicked",["sum"]),this.reportingService.enableRetainer("minute","cclicked",["sum"]),this.reportingService.enableRetainer("hour","cclicked",["sum"]),this.reportingService.enableRetainer("day","cclicked",["sum"]),this.reportingService.enableRetainer("week","cclicked",["sum"]),this.reportingService.addMetric("dclicked",["sum"]),this.reportingService.enableRetainer("minute","dclicked",["sum"]),this.reportingService.enableRetainer("hour","dclicked",["sum"]),this.reportingService.enableRetainer("day","dclicked",["sum"]),this.reportingService.enableRetainer("week","dclicked",["sum"])}}]),e}();e["default"]=c,c.$inject=["$firebaseRef","$firebaseAuth","$firebaseArray","$timeout","$q"]}),require.alias("brunch/node_modules/deppack/node_modules/node-browser-modules/node_modules/process/browser.js","process"),e=require("process"),require.register("___globals___",function(e,t,i){})}(),require("___globals___");