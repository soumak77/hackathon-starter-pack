{"version":3,"sources":["app/app.js","app/config/config-firebase.js","app/config/config-routes.js","app/modules/account/account-controller.js","app/modules/account/index.js","app/modules/home/home-controller.js","app/modules/home/index.js","app/modules/index.js","app/modules/messaging/index.js","app/modules/messaging/messaging-controller.js","app/modules/reporting/index.js","app/modules/reporting/reporting-controller.js"],"names":["initializeApp","AppConfig","$urlProvider","$locationProvider","$firebaseRefProvider","$BaseAppsStateProvider","otherwise","html5Mode","enabled","requireBase","registerUrl","databaseURL","registerDynamicRoutes","$inject","AppRun","FastClick","attach","document","body","module","concat","config","run","exports","apiKey","authDomain","storageBucket","AccountController","$firebaseAuthService","$log","BaseAppsApi","authService","authLoading","provider","$signInAnonymously","catch","error","log","publish","title","content","message","color","finally","$signInWithPopup","substr","toUpperCase","email","JSON","stringify","$getAuth","$signOut","angular","controller","name","HomeController","$firebaseRef","$firebaseObject","$firebaseArray","$timeout","self","ref","default","child","person","messages","$resolved","$loaded","then","animationDelay","showMessages","$add","$save","ReportingController","$firebaseAuth","$q","auth","authLoaded","totalClicks","totalUsers","lastClicked","data","reportingService","firebase","$requireSignIn","init","piechart","type","label","options","legend","position","linecharts","minute","hour","day","week","initReportingService","$watch","drawAll","button","uid","timestamp","database","ServerValue","TIMESTAMP","anyclicked","saveMetrics","drawMetrics","drawCharts","filter","sum","select","values","count","value","last","drawPieChart","drawLineChart","aClickedQuery","bClickedQuery","cClickedQuery","dClickedQuery","all","rows","splice","length","push","c","v","during","queryStartTime","Date","queryEndTime","setMilliseconds","setSeconds","setMinutes","setTime","getTime","setHours","getHours","setDate","getDate","setMonth","getMonth","setFullYear","getFullYear","range","i","addFilter","addMetric","enableRetainer"],"mappings":"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","file":"public/js/app.js","sourcesContent":["// Angular Base Apps Configuration\nimport fs from 'fastclick';\nimport angular from 'angular';\nimport 'angular-base-apps';\nimport 'angular-google-chart/ng-google-chart';\nimport 'angular-ui-router';\n\n// Firebase Configuration\nimport firebase from 'firebase';\nimport 'angularfire';\nimport firebaseconfig from './config/config-firebase';\nfirebase.initializeApp(firebaseconfig);\n\n// Icon Configuration\nimport 'angular-icons/dist/open-iconic';\nimport 'angular-icons/dist/ionicons';\nimport 'angular-icons/dist/material-icons';\n\n// Route Configuration\nimport 'angular-dynamic-routing/dynamicRouting';\nimport 'angular-dynamic-routing/dynamicRouting.animations';\nimport routeconfig from './config/config-routes';\n\n// Application Configuration\nimport moduleconfig from './modules';\n\nconst AppConfig = ($urlProvider, $locationProvider, $firebaseRefProvider, $BaseAppsStateProvider) => {\n  $urlProvider.otherwise('/');\n\n  $locationProvider.html5Mode({\n    enabled: false,\n    requireBase: false\n  });\n\n  $firebaseRefProvider.registerUrl(firebaseconfig.databaseURL);\n\n  $BaseAppsStateProvider.registerDynamicRoutes(routeconfig);\n};\n\nAppConfig.$inject = ['$urlRouterProvider', '$locationProvider', '$firebaseRefProvider', '$BaseAppsStateProvider'];\n\nconst AppRun = () => {\n  fs.FastClick.attach(document.body);\n};\n\nangular.module('application', [\n  'ui.router',\n  'ngAnimate',\n\n  // firebase\n  'firebase',\n\n  // base apps\n  'base',\n\n  // google charts\n  'googlechart',\n\n  // icons\n  'angularIcons.openIconic',\n  'angularIcons.ionicons',\n  'angularIcons.materialIcons',\n\n  // dynamic routing\n  'dynamicRouting',\n  'dynamicRouting.animations'\n].concat(moduleconfig))\n.config(AppConfig)\n.run(AppRun);\n","module.exports = {\n  apiKey: 'AIzaSyBkB1IvviOcPq4z8Rs7nijEdIa9n1IvRlU',\n  authDomain: 'angular-firebase-template.firebaseapp.com',\n  databaseURL: 'https://angular-firebase-template.firebaseio.com',\n  storageBucket: ''\n};\n","\n  module.exports = [{\"name\":\"reporting\",\"url\":\"/reporting\",\"controller\":\"ReportingController as reporting\",\"path\":\"modules/reporting/reporting.html\"},{\"name\":\"messaging\",\"url\":\"/messaging\",\"controller\":\"MessagingController as messaging\",\"animationIn\":\"slideInRight\",\"animationOut\":\"slideOutLeft\",\"path\":\"modules/messaging/messaging.html\"},{\"name\":\"account\",\"url\":\"/account\",\"controller\":\"AccountController as account\",\"animationIn\":\"slideInLeft\",\"animationOut\":\"slideOutRight\",\"path\":\"modules/account/account.html\"},{\"name\":\"home\",\"url\":\"/\",\"controller\":\"HomeController as home\",\"animationIn\":\"slideInRight\",\"animationOut\":\"slideOutLeft\",\"path\":\"modules/home/home.html\"}];\n  ","export default class AccountController {\n  constructor($firebaseAuthService, $log, BaseAppsApi) {\n    this.authService = $firebaseAuthService;\n    this.authLoading = false;\n    this.$log = $log;\n    this.BaseAppsApi = BaseAppsApi;\n    return this;\n  }\n\n  signin(provider) {\n    const $log = this.$log;\n    const BaseAppsApi = this.BaseAppsApi;\n\n    switch (provider) {\n      case 'anonymous':\n        this.authLoading = true;\n        return this.authService.$signInAnonymously()\n          .catch((error) => {\n            $log.log('Login Failed!', error);\n            BaseAppsApi.publish('account-notifications', {\n              title: 'Anonymous Login Failed',\n              content: error.message,\n              color: 'alert'\n            });\n          })\n          .finally(() => this.authLoading = false);\n      case 'google':\n      case 'twitter':\n      case 'facebook':\n      case 'github':\n        this.authLoading = true;\n        return this.authService.$signInWithPopup(provider)\n          .catch((error) => {\n            $log.log('Login Failed!', error);\n            BaseAppsApi.publish('account-notifications', {\n              title: provider.substr(0, 1).toUpperCase() + provider.substr(1) + ' Login Failed',\n              content: error.message + (error.email ? ' (email: ' + error.email + ')' : ''),\n              color: 'alert'\n            });\n          })\n          .finally(() => this.authLoading = false);\n      default:\n        $log.log('Provider not supported: ' + provider);\n        return null;\n    }\n  }\n\n  printUserInfo() {\n    return JSON.stringify(this.authService.$getAuth(), null, 2);\n  }\n\n  signout() {\n    this.authLoading = true;\n    return this.authService.$signOut()\n      .finally(() => this.authLoading = false);\n  }\n}\n\nAccountController.$inject = ['$firebaseAuthService', '$log', 'BaseAppsApi'];\n","import 'firebase';\nimport AccountController from './account-controller';\n\nexport default angular.module('application.account', ['firebase.auth'])\n  .controller('AccountController', AccountController)\n  .name;\n","export default class HomeController {\n  constructor($firebaseRef, $firebaseObject, $firebaseArray, $timeout) {\n    const self = this;\n    let ref;\n\n    ref = $firebaseRef.default.child('person');\n    this.person = $firebaseObject(ref);\n    ref = $firebaseRef.default.child('messages');\n    this.messages = $firebaseArray(ref);\n\n    this.messages.$resolved = false;\n    this.messages.$loaded().then(() => {\n      self.messages.$resolved = true;\n    });\n\n    // delay message rendering until after view animation\n    const animationDelay = 750;\n    this.showMessages = false;\n    $timeout(() => {\n      self.showMessages = true;\n    }, animationDelay);\n\n    return self;\n  }\n\n  submitMessage(message) {\n    this.messages.$add(message);\n  }\n\n  updateName(name) {\n    this.person.name = name;\n    this.person.$save();\n  }\n}\n\nHomeController.$inject = ['$firebaseRef', '$firebaseObject', '$firebaseArray', '$timeout'];\n","import 'firebase';\nimport HomeController from './home-controller';\n\nexport default angular.module('application.home', ['firebase.database'])\n  .controller('HomeController', HomeController)\n  .name;\n","import './account';\nimport './home';\nimport './messaging';\nimport './reporting';\n\nmodule.exports = [\n  'application.account',\n  'application.home',\n  'application.messaging',\n  'application.reporting'\n];\n","import 'firebase';\nimport MessagingController from './messaging-controller';\n\nexport default angular.module('application.messaging', ['firebase.database'])\n  .controller('MessagingController', MessagingController)\n  .name;\n","export default class HomeController {\n  constructor($firebaseRef, $firebaseObject, $firebaseArray, $timeout) {\n    const self = this;\n    let ref;\n\n    ref = $firebaseRef.default.child('person');\n    this.person = $firebaseObject(ref);\n    ref = $firebaseRef.default.child('messages');\n    this.messages = $firebaseArray(ref);\n\n    this.messages.$resolved = false;\n    this.messages.$loaded().then(() => {\n      self.messages.$resolved = true;\n    });\n\n    // delay message rendering until after view animation\n    const animationDelay = 750;\n    this.showMessages = false;\n    $timeout(() => {\n      self.showMessages = true;\n    }, animationDelay);\n\n    return self;\n  }\n\n  submitMessage(message) {\n    this.messages.$add(message);\n  }\n\n  updateName(name) {\n    this.person.name = name;\n    this.person.$save();\n  }\n}\n\nHomeController.$inject = ['$firebaseRef', '$firebaseObject', '$firebaseArray', '$timeout'];\n","import ReportingController from './reporting-controller';\n\nexport default angular.module('application.reporting', ['firebase.database'])\n  .controller('ReportingController', ReportingController)\n  .name;\n","import FirebaseReporting from 'firebase-reporting';\nimport firebase from 'firebase';\n\nexport default class ReportingController {\n  constructor($firebaseRef, $firebaseAuth, $firebaseArray, $timeout, $q) {\n    this.authService = $firebaseAuth(firebase.auth());\n    this.$timeout = $timeout;\n    this.$q = $q;\n    this.authLoaded = false;\n    this.totalClicks = null;\n    this.totalUsers = null;\n    this.lastClicked = null;\n    this.data = $firebaseArray($firebaseRef.default.child('data'));\n    this.reportingService = new FirebaseReporting({\n      firebase: $firebaseRef.default.child('reporting')\n    });\n\n    this.authService.$requireSignIn()\n      .then(() => this.init())\n      .catch(() => this.authService.$signInAnonymously().then(() => this.init()));\n\n    this.piechart = {\n      type: 'PieChart',\n      data: {\n        'cols': [\n          {label: 'Button', type: 'string'},\n          {label: 'Times Clicked', type: 'number'}\n        ],\n        'rows': []\n      },\n      options: {\n        legend: {\n          position: 'bottom'\n        }\n      }\n    };\n    this.linecharts = {};\n    this.linecharts.minute = {\n      type: 'LineChart',\n      data: {\n        'cols': [\n          {label: 'Time', type: 'date'},\n          {label: 'A', type: 'number'},\n          {label: 'B', type: 'number'},\n          {label: 'C', type: 'number'},\n          {label: 'D', type: 'number'}\n        ],\n        'rows': []\n      },\n      options: {\n        title: 'Clicked this Hour',\n        legend: {\n          position: 'bottom'\n        }\n      }\n    };\n    this.linecharts.hour = {\n      type: 'LineChart',\n      data: {\n        'cols': [\n          {label: 'Time', type: 'date'},\n          {label: 'A', type: 'number'},\n          {label: 'B', type: 'number'},\n          {label: 'C', type: 'number'},\n          {label: 'D', type: 'number'}\n        ],\n        'rows': []\n      },\n      options: {\n        title: 'Clicked Today',\n        legend: {\n          position: 'bottom'\n        }\n      }\n    };\n    this.linecharts.day = {\n      type: 'LineChart',\n      data: {\n        'cols': [\n          {label: 'Time', type: 'date'},\n          {label: 'A', type: 'number'},\n          {label: 'B', type: 'number'},\n          {label: 'C', type: 'number'},\n          {label: 'D', type: 'number'}\n        ],\n        'rows': []\n      },\n      options: {\n        title: 'Clicked this Month',\n        legend: {\n          position: 'bottom'\n        }\n      }\n    };\n    this.linecharts.week = {\n      type: 'LineChart',\n      data: {\n        'cols': [\n          {label: 'Time', type: 'date'},\n          {label: 'A', type: 'number'},\n          {label: 'B', type: 'number'},\n          {label: 'C', type: 'number'},\n          {label: 'D', type: 'number'}\n        ],\n        'rows': []\n      },\n      options: {\n        title: 'Clicked this Year',\n        legend: {\n          position: 'bottom'\n        }\n      }\n    };\n\n    return this;\n  }\n\n  init() {\n    this.authLoaded = true;\n    this.initReportingService();\n    this.data.$watch(() => this.drawAll());\n    this.drawAll();\n  }\n\n  buttonClicked(button) {\n    const data = {\n      uid: this.authService.$getAuth().uid,\n      timestamp: firebase.database.ServerValue.TIMESTAMP,\n      anyclicked: 1\n    };\n    data[button + 'clicked'] = 1;\n\n    // save metrics first to ensure onDataSaved callback\n    // is called after metrics have been calculated\n    this.reportingService.saveMetrics(data).then(() => {\n      this.data.$add(data);\n    });\n  }\n\n  drawAll() {\n    this.drawMetrics();\n    this.drawCharts();\n  }\n\n  drawMetrics() {\n    this.reportingService.filter().sum('anyclicked').select(1).then((values) => {\n      this.$timeout(() => this.totalClicks = values[0] || 0);\n    });\n    this.reportingService.filter('users').sum('anyclicked').count().then((value) => {\n      this.$timeout(() => this.totalUsers = value || 0);\n    });\n    this.reportingService.filter().last('timestamp').select(1).then((values) => {\n      this.$timeout(() => this.lastClicked = values[0] ? values[0] : null);\n    });\n  }\n\n  drawCharts() {\n    this.drawPieChart();\n    this.drawLineChart('minute');\n    this.drawLineChart('hour');\n    this.drawLineChart('day');\n    this.drawLineChart('week');\n  }\n\n  drawPieChart() {\n    const aClickedQuery = this.reportingService.filter().sum('aclicked').value();\n    const bClickedQuery = this.reportingService.filter().sum('bclicked').value();\n    const cClickedQuery = this.reportingService.filter().sum('cclicked').value();\n    const dClickedQuery = this.reportingService.filter().sum('dclicked').value();\n\n    this.$q.all([aClickedQuery, bClickedQuery, cClickedQuery, dClickedQuery]).then((values) => {\n      this.$timeout(() => {\n        this.piechart.data.rows.splice(0, this.piechart.data.rows.length);\n        this.piechart.data.rows.push({ c: [{ v: 'A' }, {v: values[0] }] });\n        this.piechart.data.rows.push({ c: [{ v: 'B' }, {v: values[1] }] });\n        this.piechart.data.rows.push({ c: [{ v: 'C' }, {v: values[2] }] });\n        this.piechart.data.rows.push({ c: [{ v: 'D' }, {v: values[3] }] });\n      });\n    });\n  }\n\n  drawLineChart(during) {\n    const queryStartTime = new Date();\n    const queryEndTime = new Date();\n    queryStartTime.setMilliseconds(0);\n    queryStartTime.setSeconds(0);\n    queryStartTime.setMinutes(0);\n\n    switch (during) {\n      case 'minute':\n        queryEndTime.setTime(queryStartTime.getTime());\n        queryEndTime.setHours(queryStartTime.getHours() + 1);\n        break;\n      case 'hour':\n        queryStartTime.setHours(0);\n        queryEndTime.setTime(queryStartTime.getTime());\n        queryEndTime.setDate(queryStartTime.getDate() + 1);\n        break;\n      case 'day':\n        queryStartTime.setHours(0);\n        queryStartTime.setDate(1);\n        queryEndTime.setTime(queryStartTime.getTime());\n        queryEndTime.setMonth(queryStartTime.getMonth() + 1);\n        break;\n      case 'week':\n        queryStartTime.setHours(0);\n        queryStartTime.setDate(1);\n        queryStartTime.setMonth(1);\n        queryEndTime.setTime(queryStartTime.getTime());\n        queryEndTime.setFullYear(queryStartTime.getFullYear() + 1);\n        break;\n    }\n\n    const aClickedQuery = this.reportingService.filter().sum('aclicked').during(during).range(queryStartTime.getTime(), queryEndTime.getTime()).values(true);\n    const bClickedQuery = this.reportingService.filter().sum('bclicked').during(during).range(queryStartTime.getTime(), queryEndTime.getTime()).values(true);\n    const cClickedQuery = this.reportingService.filter().sum('cclicked').during(during).range(queryStartTime.getTime(), queryEndTime.getTime()).values(true);\n    const dClickedQuery = this.reportingService.filter().sum('dclicked').during(during).range(queryStartTime.getTime(), queryEndTime.getTime()).values(true);\n\n    this.$q.all([aClickedQuery, bClickedQuery, cClickedQuery, dClickedQuery]).then((values) => {\n      this.linecharts[during].data.rows.splice(0, this.linecharts[during].data.rows.length);\n      for (var i = 0; i < values[0].length; i++) {\n        this.linecharts[during].data.rows.push({\n          c: [{\n            v: new Date(values[0][i].timestamp)\n          }, {\n            v: values[0][i].value\n          }, {\n            v: values[1][i].value\n          }, {\n            v: values[2][i].value\n          }, {\n            v: values[3][i].value\n          }]\n        });\n      }\n    });\n  }\n\n  initReportingService() {\n    // Add report filter for users\n    this.reportingService.addFilter('users', ['uid']);\n\n    // Metrics for timing\n    this.reportingService.addMetric('timestamp', ['first', 'last']);\n\n    // Metrics for ANY button clicked\n    this.reportingService.addMetric('anyclicked', ['sum']);\n    this.reportingService.enableRetainer('minute', 'anyclicked', ['sum']);\n    this.reportingService.enableRetainer('hour', 'anyclicked', ['sum']);\n    this.reportingService.enableRetainer('day', 'anyclicked', ['sum']);\n    this.reportingService.enableRetainer('week', 'anyclicked', ['sum']);\n\n    // Metrics for A button clicked\n    this.reportingService.addMetric('aclicked', ['sum']);\n    this.reportingService.enableRetainer('minute', 'aclicked', ['sum']);\n    this.reportingService.enableRetainer('hour', 'aclicked', ['sum']);\n    this.reportingService.enableRetainer('day', 'aclicked', ['sum']);\n    this.reportingService.enableRetainer('week', 'aclicked', ['sum']);\n\n    // Metrics for B button clicked\n    this.reportingService.addMetric('bclicked', ['sum']);\n    this.reportingService.enableRetainer('minute', 'bclicked', ['sum']);\n    this.reportingService.enableRetainer('hour', 'bclicked', ['sum']);\n    this.reportingService.enableRetainer('day', 'bclicked', ['sum']);\n    this.reportingService.enableRetainer('week', 'bclicked', ['sum']);\n\n    // Metrics for C button clicked\n    this.reportingService.addMetric('cclicked', ['sum']);\n    this.reportingService.enableRetainer('minute', 'cclicked', ['sum']);\n    this.reportingService.enableRetainer('hour', 'cclicked', ['sum']);\n    this.reportingService.enableRetainer('day', 'cclicked', ['sum']);\n    this.reportingService.enableRetainer('week', 'cclicked', ['sum']);\n\n    // Metrics for D button clicked\n    this.reportingService.addMetric('dclicked', ['sum']);\n    this.reportingService.enableRetainer('minute', 'dclicked', ['sum']);\n    this.reportingService.enableRetainer('hour', 'dclicked', ['sum']);\n    this.reportingService.enableRetainer('day', 'dclicked', ['sum']);\n    this.reportingService.enableRetainer('week', 'dclicked', ['sum']);\n  }\n}\n\nReportingController.$inject = ['$firebaseRef', '$firebaseAuth', '$firebaseArray', '$timeout', '$q'];\n"]}